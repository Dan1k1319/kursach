{% extends "main.html" %}

{% block title %}Профиль пользователя - HR Management System{% endblock %}

{% block content %}
<div class="container mt-5">
    <h2 class="mb-4">Профиль пользователя: {{ user.username }}</h2>
    <dl class="row">
        <dt class="col-sm-3">Email:</dt>
        <dd class="col-sm-9">{{ user.email }}</dd>
        <dt class="col-sm-3">Биография:</dt>
        <dd class="col-sm-9">{{ user.bio }}</dd>
        <dt class="col-sm-3">Паспортные данные:</dt>
        <dd class="col-sm-9">{{ user.passport_data }}</dd>
        <dt class="col-sm-3">Отдел:</dt>
        <dd class="col-sm-9">{{ department_name }}</dd>
        <dt class="col-sm-3">Позиция:</dt>
        <dd class="col-sm-9">{{ user.position }}</dd>
        <dt class="col-sm-3">Обязанности:</dt>
        <dd class="col-sm-9">{{ user.responsibilities }}</dd>
    </dl>
    {% if current_user.role == 'Admin' or current_user.role == 'Manager' %}
    <hr>
    <h4 class="mt-4">Задания</h4>
    <ul class="list-group">
        {% for task in user_tasks %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                <span>{{ task.description }} (до {{ task.deadline.strftime('%Y-%m-%d %H:%M') }})</span>
                <form method="POST" action="{{ url_for('complete_task', task_id=task.id) }}">
                    <button type="submit" class="btn btn-success btn-sm">Отправить на проверку</button>
                </form>
            </li>
        {% endfor %}
    </ul>
    {% endif %}
</div>
{% endblock %}